import matplotlib.pyplot as plt
from matplotlib import gridspec
import numpy as np
import matplotlib
matplotlib.rcParams['pdf.fonttype'] = 42
matplotlib.rcParams['ps.fonttype'] = 42

data_c_usage = [0, 0.235996246, 1.030578613, 1.834846497, 2.634315491, 3.435066223, 4.217075348, 5.015518188, 5.818359375, 6.620410919, 7.416389465, 8.185691833, 8.56967926, 8.987167358, 9.412879944, 9.882183075, 10.69043732, 11.49692917, 12.3059082, 13.110466, 13.82367706, 14.33838272, 13.78195953, 14.55078506, 15.36562729, 16.17235184, 16.9818573, 17.76442719, 18.37937927, 18.74020004, 19.39118576, 20.1970787, 21.00083542, 13.07604218, 11.21910477, 11.87637711, 12.50849533, 13.1746254, 13.97740173, 14.77958298, 15.58003998, 16.38056183, 17.14107513, 17.80221939, 13.63576126, 12.40406036, 13.19989395, 13.99858475, 14.80820465, 15.60728836, 16.36712265, 16.90031815, 17.4756813, 18.13344574, 18.93307495, 17.32090759, 12.73812866, 13.53593063, 14.26829529, 14.9013176, 15.4706192, 16.15564728, 16.95719528, 17.75634003, 18.55119324, 19.34646606, 18.52209473, 12.21447372, 12.80012512, 13.51079941, 14.31494904, 15.11983871, 15.93005753, 16.7352066, 17.45443726, 18.04401779, 18.6232872, 19.33327484, 14.47307205, 15.26837921, 16.06563187, 16.86142349, 17.55071259, 18.13154221, 18.76512146, 19.49578476, 20.29293823, 21.08837891, 21.88508224, 16.19720459, 11.89653778, 12.54704285, 13.17378998, 13.90376282, 14.7114296, 15.52108383, 16.32811356, 17.11788177, 17.81468201, 18.38559723, 18.3789978, 13.99008942, 14.789711, 15.58731461, 16.38911819, 17.1854248, 17.87009048, 18.49716949, 19.10121155, 19.84177399, 20.64460754, 21.44639206, 11.65537643, 12.45111084, 13.18345642, 13.71045303, 14.35024643, 14.51803589, 14.51803589, 14.51803589, 14.51803589, 14.51803589, 14.52289963, 8.253173828, 7.649868011, 7.649868011, 7.649868011, 7.649868011, 7.649868011, 7.649868011, 7.649868011, 7.649868011, 7.649868011, 7.649868011, 1.321880341, 0.043498993, 0.043498993, 0.043498993, 0.043498993, 0.043498993, 0.043498993, 0.043498993, 0.043498993, 0.043498993, 0.043498993, 0.043498993, 0.043498993, 0.043498993, 0.043498993, 0.043498993]
data_c_thp = [789.6640625, 806.2734375, 798.0507813, 799.1875, 804.078125, 775.5429688, 804.9921875, 799.359375, 795.3242188, 801.3164063, 483.2265625, 380.2421875, 386.2734375, 345.0546875, 732.0390625, 805.546875, 809.8007813, 804.4492188, 803.6035156, 559.0546875, 401.5390625, 523.109375, 808.8867188, 809.953125, 808.4140625, 805.6679688, 712.703125, 433.6796875, 396.1015625, 780.3515625, 804.4453125, 802.1455078, 712.328125, 778.2734375, 590.2851563, 582.578125, 722.5351563, 801.2070313, 798.34375, 802.578125, 803.3828125, 710.2617188, 603.9179688, 488.7851563, 669.5820313, 801.3164063, 799.7890625, 808.5664063, 798.703125, 678.4570313, 523.4960938, 526.78125, 698.2851563, 805.7578125, 741.6132813, 779.5664063, 797.2070313, 671.6240234, 596.5, 562.296875, 699.8671875, 800.984375, 798.078125, 794.1640625, 795.171875, 669.609375, 535.328125, 559, 722.1552734, 803.9804688, 804.7695313, 810.2421875, 796.3398438, 699.9375, 564.2148438, 543.7382813, 704.3398438, 742.1132813, 796.2578125, 796.890625, 791.015625, 676.5507813, 553.1289063, 597.4414063, 718.6171875, 796.8828125, 795.234375, 796.5585938, 732.328125, 616.3085938, 621.265625, 604.2109375, 696.5947266, 806.8476563, 809.703125, 807.3476563, 802.1445313, 682.4101563, 538.3632813, 581.0742188, 601.3554688, 793.6015625, 798.4257813, 801.6640625, 800.4765625, 709.9638672, 617.5664063, 549.921875, 677.53125, 803.1679688, 805.8398438, 716.0625, 783.796875, 765.2539063, 576.9492188, 533.1445313, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0]
data_nc_usage = [0, 0.753623962, 1.550544739, 2.349071503, 3.145370483, 3.945049286, 4.693443298, 5.487110138, 6.282615662, 7.077384949, 7.87915802, 8.13551712, 8.410934448, 8.78237915, 9.491573334, 10.28536987, 11.08129501, 11.87234879, 12.6654892, 13.20856476, 13.56175232, 14.29384232, 15.09295273, 15.88820267, 16.68635941, 17.48386765, 17.94021225, 18.38407516, 19.1717453, 19.96328354, 20.7511673, 21.54438782, 22.27402496, 22.65717316, 23.28288651, 24.07394791, 24.8605423, 25.64626312, 26.43754578, 26.95785141, 27.3092804, 28.04926682, 28.8398056, 29.63798141, 30.43188477, 31.22434616, 31.69117355, 32.10989761, 32.90020752, 33.69409943, 34.48475647, 35.27923965, 36.02380371, 36.39281082, 37.00072861, 37.79504776, 38.59202576, 39.38690948, 40.1823616, 40.77472687, 41.12265015, 41.8367157, 42.63382339, 43.42645645, 44.22589874, 45.01856995, 45.53789902, 45.92774582, 46.72298813, 47.51740265, 48.31286621, 49.10745239, 49.86828995, 50.24634171, 50.82147598, 51.61396408, 52.40619278, 53.20307541, 53.99673462, 54.57976913, 54.91495132, 55.62613297, 56.42541504, 57.2180748, 58.00705719, 58.7983551, 59.21194077, 59.71521759, 60.51019287, 61.30299759, 62.09748459, 62.88770676, 63.581707, 63.9455452, 64.60352707, 65.3992691, 66.19955063, 66.99728012, 67.79410934, 68.32579803, 68.63830185, 69.433918, 70.23526382, 71.03094864, 71.82666779, 72.62968826, 73.08012009, 73.5086937, 74.30586624, 75.09907532, 75.89056396, 76.6814003, 77.47143936, 77.84588242, 78.347332, 79.13648987, 79.92823029, 80.72133255, 81.51211166, 82.15065765, 82.50216293, 82.53497314, 82.53497314, 82.53497314, 82.53497314, 82.53497314, 82.5396843, 82.5396843, 82.5396843, 82.5396843, 82.5396843, 82.5396843, 82.5396843, 82.5396843, 82.5396843, 82.5396843, 82.5396843, 82.5396843, 82.5396843, 82.5396843, 82.5396843, 82.5396843, 82.5396843, 82.5396843, 82.5396843, 82.5396843, 82.5396843, 82.5396843, 82.5396843, 82.5396843]
data_nc_thp = [794.5546875, 796.8828125, 798.2929688, 796.265625, 799.4179688, 746.9492188, 793.4882813, 795.2910156, 794.6875, 801.4335938, 249.1601563, 219.75, 329.3085938, 670.9882813, 793.8554688, 796.2929688, 791.0371094, 793.0546875, 560.828125, 338.59375, 647.1210938, 798.7109375, 795.546875, 797.8085938, 797.296875, 494.5058594, 343.5039063, 775.5625, 788.2890625, 786.828125, 793.7851563, 784.03125, 374.171875, 503.859375, 790.7548828, 786.7109375, 789.453125, 786.3945313, 622.8320313, 333.1289063, 577.15625, 791.5429688, 796.328125, 793.5, 795.7929688, 581.7382813, 330.6484375, 686.125, 789.7851563, 789.7070313, 794.6328125, 790.6601563, 455.5019531, 397.5078125, 794.3710938, 796.5664063, 794.046875, 799.6015625, 747.9726563, 359.859375, 467.5625, 794.5634766, 792.1328125, 798.5390625, 794.421875, 714.6640625, 333.0585938, 575.0390625, 795.375, 796.1992188, 796.2685547, 793.6210938, 546.4296875, 334.4023438, 752.09375, 796.6367188, 791.5429688, 797.0351563, 792.90625, 377.1816406, 383.234375, 792.2421875, 794.3554688, 790.78125, 793.703125, 675.5703125, 335.1953125, 620.3662109, 795.4179688, 792.1601563, 791.1757813, 794.2421875, 539.734375, 328.90625, 770.3007813, 795.828125, 796.8505859, 801.2070313, 794.9921875, 397.828125, 369.3867188, 796.1289063, 800.6289063, 794.6914063, 796.8476563, 790.3085938, 346.4121094, 464.2539063, 793.5390625, 796.5976563, 789.9257813, 792.0351563, 743.125, 325.5117188, 516.7705078, 789.3554688, 791.0195313, 793.1679688, 790.796875, 594.2851563, 309.8007813, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0]


plt.rcParams['axes.xmargin'] = 0
plt.rcParams['axes.ymargin'] = 0
# plt.figure(figsize=(6, 3))
# fig, axes = plt.subplots(2, 1, sharex=True, figsize=(8, 4))
fig = plt.figure(figsize=(7, 3.5))
gs = gridspec.GridSpec(2, 1, height_ratios=[2,1])

# plt.subplots_adjust(wspace=0, hspace=0)
# plt.ylabel("NVM Usage (GB)")
# plt.xlabel("Time (sec)")
# plt.ylim(top=20)
# plt.xticks(np.arange(6)*4+1, clusters)
# plt.ticklabel_format(axis='y', style='sci', scilimits=(0,0))
# plt.title(d)
# for i, clust in enumerate(clusters):
#     h = plt.bar(np.arange(3)+4*i, data[d][clust], color=colors, hatch=hatches, label=fsnames)

# plt.legend(h, fsnames)
# plt.plot(data)

ax0 = fig.add_subplot(gs[0])
ax1 = fig.add_subplot(gs[1], sharex=ax0)
plt.subplots_adjust(wspace=0, hspace=0)
plt.setp(ax0.get_xticklabels(), visible=False)

ax0.set_ylabel("NVM Usage (GB)")
ax0.set_ylim(top=100)
ax1.set_ylabel("Throughput (MB/s)")
ax1.set_xlabel("Time (sec)")
ax1.set_ylim(top=1000)

ax0.plot(data_nc_usage, color="#EEC900", label="NVLog", linestyle="-.")
ax1.plot(data_nc_thp, color="#EEC900", linestyle="-.")

ax0.plot(data_c_usage, color="#5FA4D9", label="NVLog+GC")
ax1.plot(data_c_thp, color="#5FA4D9")

ax0.legend()
plt.tight_layout()
plt.savefig('gc-compact-all.pdf', bbox_inches='tight')